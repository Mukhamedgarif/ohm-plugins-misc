%define _enable_debug_packages 0
%define _unpackaged_files_terminate_build 0

Summary: A miscallaneous set of Nokia OHM plugins.
Name: ohm-plugins-misc
Version: ##__VERSION__##
Release: 1
License: Proprietary
Group: System Environment/Daemons
URL: http://127.0.0.1
Source0: %{name}-%{version}.tar.gz
BuildArch: ##__ARCH__##
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
BuildRequires: ohm-devel, libdres-devel
Requires: ohm, ohm-plugin-core, libdres

%package -n libep
Summary: A policy enforcement point convenience library.
Group: Development/Libraries

%package -n libep-dev
Summary: Headers et al for libep.
Group: Development/Libraries

%description
A miscallaneous set of OHM plugins by Nokia.

%description -n libep
libep is a convenience library intended to make it easier to develop
policy enforcement points.

%description -n libep-dev
This package containt headers, etc. necessary for compiling and linking
software using libep.

%prep
%setup -q -n ##__TARDIR__##

%build
export CFLAGS="-O0 -g3"
%configure --disable-static
make

%install
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT
%makeinstall

%clean
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root,-)
%{_libdir}/ohm/libohm_*.so
%{_bindir}/ohm-session-agent
%{_sysconfdir}/ohm/plugins.d/*.ini

%files -n libep
%{_libdir}/libep.so*

%files -n libep-dev
%defattr(-,root,root,-)
%{_includedir}/libep
%{_libdir}/pkgconfig/libep.pc

%changelog
* Wed Jul 9 2008 Krisztian Litkey <kli@localhost.localdomain> - 
- Initial build.

